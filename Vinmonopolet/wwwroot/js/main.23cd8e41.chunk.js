(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,r){e.exports=r(47)},30:function(e,t,r){},32:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(8),o=r.n(i),s=(r(30),r(2)),c=r(3),l=r(6),u=r(4),d=r(5),p=(r(32),r(20)),h=r.n(p),m=function(e){return e.map(function(e){return a.a.createElement("div",null,e.storeName," : ",e.stockLevel)})},b=function(e){var t=e.stocks,r=e.activeStores;return r.length?a.a.createElement("div",null,a.a.createElement("ul",null,t.map(function(e){return r.includes(e.storeId)&&a.a.createElement("li",{key:e.storeName},e.storeName,": ",e.stockLevel)}))):a.a.createElement("div",null,a.a.createElement(h.a,{useDefaultStyles:!0,content:m(t)},a.a.createElement("ul",null,t.map(function(e){return a.a.createElement("li",{key:e.storeName},e.storeName,": ",e.stockLevel)}))))},f=function(e){var t=e.rating,r=t/5*75||0;return a.a.createElement("div",{className:"rating-container"},a.a.createElement("svg",{height:"15",width:"75",xmlns:"http://www.w3.org/2000/svg",className:"rating-svg"},a.a.createElement("defs",null,a.a.createElement("pattern",{id:"stars",x:"1",y:"1",height:"15",width:"15",patternUnits:"userSpaceOnUse"},a.a.createElement("svg",{viewBox:"1 1 22 22",height:"15",width:"15"},a.a.createElement("polygon",{points:"9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78",fill:"orange"})))),a.a.createElement("rect",{height:"15",width:r,stroke:"orange0",fill:"url(#stars)"}),a.a.createElement("text",{className:"rating-text",x:"5",y:"15",fontWeight:"bold",fontSize:"14",fill:"black"},t&&t.toFixed(2))))},g={beerList:{overflow:"hidden",margin:"auto",minWidth:"350px",maxWidth:"1370px",minHeight:"100%",width:"100%",fontSize:"12px"},beerListLoading:{display:"inline-block",overflow:"hidden",width:"auto",maxWidth:"500px",margin:"50px auto",height:"auto",fontSize:"30px"},beerCard:{margin:"5px",padding:"5px",width:"250px",height:"120px",display:"flex",flexDirection:"row",flexWrap:"wrap",float:"left",background:"#eee",borderRadius:"3px",border:"2px solid #ddd",cursor:"pointer",overflow:"hidden"},beerName:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden"},beerLogo:{borderRadius:"4px",border:"1px solid #ddd",margin:"2px",maxWidth:"60px",maxHeight:"60px"},beerProps:{maxWidth:"170px",padding:"0px",margin:"5px",float:"left",listStyleType:"none",textAlign:"left"}},v=function(e){var t=e.beer,r=e.activeStores;return n.createElement("div",{style:g.beerCard,onClick:function(){return window.open("https://untappd.com/beer/".concat(t.untappdId))}},n.createElement("img",{alt:"Logo",style:g.beerLogo,src:t.labelUrl||"https://untappd.akamaized.net/site/assets/images/temp/badge-beer-default.png"}),n.createElement("ul",{style:g.beerProps},n.createElement(f,{rating:t.averageScore}),n.createElement("li",{style:g.beerName},t.name),n.createElement("li",{className:"price"},t.abv.toFixed(1)," % | ",t.price.toFixed(2)," kr"),n.createElement(b,{stocks:t.storeStocks,activeStores:r})))},S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,r=e.isLoaded,n=e.beers,i=e.activeStores;return t?(console.log(t),a.a.createElement("div",{style:g.beerListLoading},"Error: ",t.message," ")):r&&n?a.a.createElement("div",null,a.a.createElement("div",{style:g.beerList},n.map(function(e){return a.a.createElement(v,{key:e.materialNumber+e.storeName,activeStores:i,beer:e})}))):a.a.createElement("div",{style:g.beerListLoading}," Loading..... ")}}]),t}(n.Component),x=r(10),E=r(9),O={display:"inline",maxWidth:"500px",height:"auto",fontSize:"12px"},y={storeSelect:Object(x.a)({},O,{minWidth:"250px",marginLeft:"5px"}),sortingSelect:Object(x.a)({},O,{minWidth:"120px",marginLeft:"auto"}),searchInput:{float:"left",maxWidth:"80%",height:"38px",border:"1px solid #ccc",fontFamily:"'Montserrat', sans-serif",borderRadius:"4px",paddingLeft:"7px"},searchArea:{display:"inline",marginLeft:"5px"},logo:{fontWeight:"bold",fontSize:"30px",fontFamily:"'Montserrat', sans-serif",color:"#555",marginLeft:"10px"}},j=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;r.setState(function(e){return Object(x.a)({},e,{searchValue:t})}),e.preventDefault()},r.handleSubmit=function(e){var t=r.state.searchValue;r.props.submitSearch(t),e.preventDefault()},r.state={searchValue:""},r.handleChange=r.handleChange.bind(Object(E.a)(Object(E.a)(r))),r.handleSubmit=r.handleSubmit.bind(Object(E.a)(Object(E.a)(r))),r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:y.searchArea},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{style:y.searchInput,type:"text",placeholder:" Search",value:this.state.searchValue,onChange:this.handleChange})))}}]),t}(n.Component),w=r(11),L=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSelect=function(e){r.setState({selectedStores:e},function(){r.props.setStoresFilter(e.map(function(e){return e.value}))})},r.storesFromApi=function(){var e=[];return r.props.beerApiResult.forEach(function(t){t.storeStocks.forEach(function(t){e.find(function(e){return e.storeId===t.storeId})||e.push({storeName:t.storeName,storeId:t.storeId})})}),e},r.dropdownOptions=function(e){var t=[];return e.forEach(function(e){t.push({value:e.storeId,label:e.storeName})}),t},r.state={selectedStores:[]},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.beerApiResult?a.a.createElement("div",{style:y.storeSelect},a.a.createElement(w.a,{isMulti:!0,placeholder:"Filter stores:",hideSelectedOptions:!0,closeMenuOnSelect:!1,options:this.dropdownOptions(this.storesFromApi()),onChange:this.onSelect})):a.a.createElement("div",null,"No data")}}]),t}(n.Component),k=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).optionsList=[{value:"averageScore",label:"Rating"},{value:"abv",label:"Abv"},{value:"ibu",label:"Ibu"},{value:"price",label:"Price"}],r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:y.sortingSelect},a.a.createElement(w.a,{placeholder:"Order by:",closeMenuOnSelect:!0,options:this.optionsList,onChange:this.props.onSortingSelected}))}}]),t}(n.Component),N=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"app-header"},a.a.createElement("div",{style:y.logo}," \xf8lPol"),a.a.createElement(k,{onSortingSelected:this.props.onSortingSelected}),a.a.createElement(L,{beerApiResult:this.props.beerApiResult,setStoresFilter:this.props.setStoresFilter}),a.a.createElement(j,{submitSearch:this.props.submitSearch}))}}]),t}(n.Component),A=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e))).setSorting=function(e){r.setState({beerListSorting:e.value})},r.setStoresFilter=function(e){r.setState({activeStores:e})},r.submitSearch=function(e){var t=e;r.setState({searchString:t},function(){return r.fetchBeers()})},r.fetchBeers=function(){fetch("/api/beers?query=".concat(r.state.searchString)).then(function(e){return e.json()}).then(function(e){r.setState({isLoaded:!0,beerApiResult:e.sort(function(e,t){return t.averageScore-e.averageScore})})},function(e){r.setState({isLoaded:!0,error:e})})},r.filteredBeers=function(){var e=r.state.beerApiResult.slice(0);return r.state.beerApiResult.length&&r.state.activeStores.length&&(e=e.filter(function(e){return e.storeStocks.map(function(e){return e.storeId}).some(function(e){return r.state.activeStores.map(function(t){return t===e}).some(function(e){return!0===e})})})),e.sort(function(e,t){return t[r.state.beerListSorting]-e[r.state.beerListSorting]}),e||[]},r.componentDidMount=function(){r.fetchBeers()},r.state={searchString:"Stout",isLoaded:!1,beerListSorting:"averageRating",activeStores:[],beerApiResult:[]},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"main-container"},a.a.createElement(N,{beerApiResult:this.state.beerApiResult.slice(0),submitSearch:this.submitSearch,setStoresFilter:this.setStoresFilter,onSortingSelected:this.setSorting}),a.a.createElement(S,{error:this.state.error,beers:this.filteredBeers(),activeStores:this.state.activeStores,isLoaded:this.state.isLoaded}))}}]),t}(n.Component),C=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(A,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.23cd8e41.chunk.js.map